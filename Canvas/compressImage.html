<!DOCTYPE html>
<html>

<head>
    <meta charset="utf-8">
    <title>Canvas 压缩图片</title>
</head>

<body>
    <input type="file" id="imageFile" name="imageFile" accept="image/*" onchange="CompressAndShow()" />
    <!-- canvas 默认宽300，高150 -->
    <canvas id="canvas"></canvas>
</body>
    <script type="text/javascript">
        function CompressAndShow(){
            var width = 80;
            var height = 60;
            var dom = document.getElementById("imageFile");
            const canvas = document.getElementById("canvas");
            canvas.width = width;
            canvas.height = height;
            const ctx = canvas.getContext('2d');

            const img = new Image();
            if(dom.files && dom.files[0]){
                img.src = window.URL.createObjectURL(dom.files[0]);
                img.onload = () => {
                    ctx.drawImage(img, 0, 0, width, height);
                }
            }
        }
    </script>
</html>
